# 新一代飞控-- QingLuan II

## 项目背景

在之前的项目中，本人设计了QingLuan第一代飞控系统，通过实践本人总结了一下第一代飞控的几个缺点和不足：

- 飞控尺寸过大
- 传感器精度不够
- 功能单一，难以追踪调试
- 需要外接的模块过多，显得很臃肿
- 供电电路设计的不够合理

所以本人着手设计开发第二代飞控系统，本代飞控系统依旧面向四旋翼飞行器设计，致力于解决一代中的痛点，同时尽可能低的压低物料成本，充分榨干芯片的性能。由于本人时间有限，可能开发进度不定期更新（~~不会鸽的~~）

~~由于本人没有系统的学习过硬件电路设计，如在设计中有需要改进的地方，欢迎友善指出，我一定改~~

<div style="display:inline-block">   
    <img src="https://tuchuang-e682.obs.cn-north-1.myhuaweicloud.com/image-20231121221503497.png" alt="飞控PCB">   
    <img src="https://tuchuang-e682.obs.cn-north-1.myhuaweicloud.com/image-20231121221740366.png" alt="3D"> 
</div>

## 项目结构

本项目的主目录结构如下

```txt
|--DataDocs						(项目硬件选型文档以及开发文档)
|--FlyControllerHardware		 (项目硬件设计)
|--FlyControllerSoftware		 (项目软件设计)
|--README.md
```

硬件设计主要开源原理图，PCB设计文件，软件部分开源飞控固件

## 主要选型

- STM32G431CBU6
- IMU--BMI270
- 气压计--LPS22HB
- 地磁计--HMC5883L
- GPS模块--待定（反正也是外接，用哪个都一样）
- TF卡
- 接收机--E22400T22S

关于为什么选这么一颗主控，~~主要是清库存，之前做别的项目买多了~~，主要是封装小，不占地方，引脚数量刚好，资源刚好够用，所以就选择了这颗芯片，其实前期也考虑到了使用国产芯片（air32f103）来开发，后续由于希望使用cubemx进行开发，使用国产芯片会遇到一些问题，所以又回到了STM32.至于传感器这些只是选择了目前较为主流的传感器，GPS模块其实选哪个都一样；除此之外还留了TF卡接口，本人暂时是想把TF卡当成黑匣子记录飞行数据，接收机选择了433Mhz模块，直接焊在了板子的背面，datasheet里空旷场景通信距离较远，后续会实测

## 画饼

由于飞控集成了“接收机”，所以后续计划加入遥控器项目，计划使用433Mhz频段进行远距离遥7控指令传输，遥控器部分应该会再开一个新的坑。

~~主要是工作量也不小，然后本人还有一些别的事情，所以更新应该会短短续续~~
